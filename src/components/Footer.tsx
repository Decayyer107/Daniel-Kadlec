'use client'

import { useTheme } from '@/utils/ThemeContext';
import LanguageSwitcher from './LanguageSwicther';
import ThemeSwitcher from './ThemeSwitcher';

import { useLanguage } from '@/utils/LanguageContext';
import HopperElement from "@/components/HopperElement";
import SocialIcons from "@/components/SocialIcons";
import Image from "next/image";
import Link from "next/link";
import {usePathname, useRouter} from "next/navigation";
import {useEffect} from "react";

const LogoPrimary = "/logo/logomark-primary.svg";
const LogoSecondary = "/logo/logomark-secondary.svg";


export default function Footer() {
    const { dict } = useLanguage();
    const { theme, toggleTheme } = useTheme();

    const router = useRouter();
    const pathname = usePathname();

    const goHome = (hash?: string, e?: React.MouseEvent) => {
        e?.preventDefault();
        if (pathname === '/') {
            if (hash) document.getElementById(hash)?.scrollIntoView({ behavior: 'smooth' });
            else window.scrollTo({ top: 0, behavior: 'smooth' });
        } else {
            router.push(hash ? `/#${hash}` : '/');
        }
    };

    const goPortfolio = (e?: React.MouseEvent) => {
        e?.preventDefault();
        if (pathname === '/portfolio') {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        } else {
            router.push('/portfolio');
        }
    };

    useEffect(() => {
        if (pathname === '/' && window.location.hash) {
            const id = window.location.hash.slice(1);
            document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' });
        }
    }, [pathname]);
    return (
        <footer className="section ">
            <div className={'bg-gray-200 dark:bg-[#0C0C0E] border-2 shadow-xl border-gray-100 dark:border-gray-900 w-full py-[clamp(_24px,_1.5vw,_36px)] rounded-[16px] sm:rounded-[24px] mb-8 px-[clamp(_24px,_1.5vw,_48px)] transition-all duration-500 flex justify-between items-center'}>
                <div className={'scale-y-[-1]'}>
                    <HopperElement className={'hidden lg:block'}/>
                </div>
                <div className={'flex flex-col justify-center items-center gap-[clamp(_14px,_1.5vw,_24px)]'}>
                    <div className="flex gap-[clamp(_4px,_1vw,_8px)] justify-center items-center">
                        <div className="relative w-[clamp(_36px,_5vw,_56px)] h-[clamp(_36px,_5vw,_56px)] ">
                            <Image
                                src={theme === "dark" ? LogoPrimary : LogoSecondary}
                                alt="Logo"
                                fill
                                className="object-contain cursor-pointer"
                                priority
                                unoptimized
                            />
                        </div>
                        <span className="text font-primary font-bold text-[clamp(_20px,_3vw,_30px)]">Daniel <span className="text-green">Kadlec</span></span>
                    </div>
                    <div>
                        <ul className="gap-12 font-secondary font-bold text-md hidden md:flex">
                            <li><Link className={'text'} href="/" onClick={(e) => goHome(undefined, e)}>{dict.nav.Home}</Link></li>
                            <li><Link className={'text'} href="/#about" onClick={(e) => goHome('about', e)}>{dict.nav.About}</Link></li>
                            <li><Link className={'text'} href="/portfolio" onClick={(e) => goPortfolio(e)}>{dict.nav.Portfolio}</Link></li>
                            <li><Link className={'text'} href="/#contact" onClick={(e) => goHome('contact', e)}>{dict.nav.Contact}</Link></li>
                        </ul>
                    </div>
                    <div className="flex gap-[clamp(_16px,_3vw,_32px)] justify-center items-center">
                        <LanguageSwitcher />
                        <ThemeSwitcher theme={theme} toggleTheme={toggleTheme} />
                    </div>
                    <div>
                <span className="flex gap-6 items-center">
                    <SocialIcons isSmall={true}/>
                </span>
                    </div>
                </div>
                <div className={'scale-x-[-1]'}>
                    <HopperElement className={'hidden lg:block'}/>
                </div>
            </div>
        </footer>
    );
}
